{"mappings":"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","sources":["src/index.js","src/js/pagination.js"],"sourcesContent":["// import pageHeaderAutoSize from './js/service/pageheaderautosize';\nimport { mask } from './js/loader';\nimport { paginationFeach } from './js/pagination';\nimport * as teamModal from './js/team-members';\nimport toggleModal from './js/modal';\nimport searchByName from './js/searchByName';\nimport theme from './js/theme';\nimport addToQueueOrWatched from './js/add-to-queue-or-watched'\nimport languageApi from './js/language-changer'\n// pageHeaderAutoSize()\n// toggleModal();\n\npaginationFeach();\n","import * as paginationFunctions from './pagination-functions';\nimport onLoad from './onLoad';\nimport apiService from './apiService';\nimport localstorage from './service/localstorage';\n\nconst NUMBER_PAGINATION = 5;\nconst cardContainerEl = document.querySelector('.gallery');\nconst paginationEl = document.querySelector('.pagination__box');\nconst paginationContainerEl = document.querySelector('.pagination__container');\nconst formRef = document.querySelector('#search-form');\n\nfunction getFilmsFromStoradge() {\n  const savedFilms = localStorage.getItem('currentFilms') || {};\n  try {\n    const parsedSavedFilms = JSON.parse(savedFilms);\n    const pageNumber = parsedSavedFilms.total_pages;\n\n    return pageNumber;\n  } catch {\n    console.log('nothing');\n  }\n}\n\nexport async function paginationFeach() {\n  const totalPages = Math.min(getFilmsFromStoradge(), 500);\n\n  await onLoad();\n\n  if (totalPages <= NUMBER_PAGINATION + 2 && totalPages >= 1) {\n    paginationFunctions.displayPaginationSmall(totalPages, paginationEl);\n    document\n      .querySelector('.js-page-1')\n      .classList.add('pagination__item--select');\n\n    if (totalPages === 1) {\n      paginationFunctions.clearPagination(paginationEl);\n    }\n\n    paginationEl.addEventListener('click', onPaginationBtnClick);\n    formRef.addEventListener('submit', onFormClickSmall);\n\n    function onFormClickSmall() {\n      paginationEl.removeEventListener('click', onPaginationBtnClick);\n      paginationContainerEl.removeEventListener('click', onPaginationClick);\n    }\n    return;\n  }\n\n  paginationEl.innerHTML = '';\n\n  paginationFunctions.displayPaginationBig(\n    totalPages,\n    paginationContainerEl,\n    paginationEl\n  );\n  document\n    .querySelector('.js-page-1')\n    .classList.add('pagination__item--select');\n\n  const btnLeft = document.querySelector('.pagination__btnLeft');\n  const btnRight = document.querySelector('.pagination__btnRight');\n\n  btnLeft.disabled = true;\n\n  paginationContainerEl.addEventListener('click', onPaginationClick);\n\n  function onPaginationClick(e) {\n    e.preventDefault();\n\n    if (\n      !e.target.classList.contains('pagination__item') &&\n      !e.target.classList.contains('pagination__btnLeft') &&\n      !e.target.classList.contains('pagination__btnRight')\n    ) {\n      return;\n    }\n\n    if (e.target.classList.contains('pagination__item')) {\n      const currentPage = Number(e.target.textContent);\n\n      onBigPaginationBtnClickrRenderFilms(currentPage);\n      onBigPaginationBtnClickrRenderPagination(totalPages, currentPage);\n\n      paginationFunctions.activityArrows(currentPage, totalPages);\n    }\n\n    if (e.target.classList.contains('pagination__btnLeft')) {\n      const activePage = document.querySelector('.pagination__item--select');\n      const activePageNumber = Number(activePage.textContent);\n      const previousPage = activePageNumber - 1;\n\n      onBigPaginationBtnClickrRenderFilms(previousPage);\n      onBigPaginationBtnClickrRenderPagination(totalPages, previousPage);\n\n      paginationFunctions.activityOfLeftArrow(1);\n    }\n\n    if (e.target.classList.contains('pagination__btnRight')) {\n      const activePage = document.querySelector('.pagination__item--select');\n      const activePageNumber = Number(activePage.textContent);\n      const nextPage = activePageNumber + 1;\n\n      onBigPaginationBtnClickrRenderFilms(nextPage);\n      onBigPaginationBtnClickrRenderPagination(totalPages, nextPage);\n\n      paginationFunctions.activityOfRightArrow(totalPages);\n    }\n  }\n\n  formRef.addEventListener('submit', onFormClick);\n\n  function onFormClick() {\n    paginationContainerEl.removeEventListener('click', onPaginationClick);\n    paginationEl.removeEventListener('click', onPaginationBtnClick);\n  }\n}\n\nfunction onBigPaginationBtnClickrRenderPagination(totalPages, currentPage) {\n  paginationFunctions.clearPagination(paginationEl);\n\n  const n = NUMBER_PAGINATION - (Math.ceil(NUMBER_PAGINATION / 3) - 2);\n  const m = totalPages - (NUMBER_PAGINATION - 1);\n\n  if (currentPage < n) {\n    paginationFunctions.displayPaginationBig(\n      totalPages,\n      paginationContainerEl,\n      paginationEl\n    );\n  } else if (currentPage >= n && currentPage <= m) {\n    paginationFunctions.displayPaginationBigMiddle(\n      totalPages,\n      currentPage,\n      paginationContainerEl,\n      paginationEl\n    );\n  } else {\n    paginationFunctions.displayPaginationBigFinish(\n      totalPages,\n      paginationContainerEl,\n      paginationEl\n    );\n  }\n\n  document\n    .querySelector(`.js-page-${currentPage}`)\n    ?.classList.add('pagination__item--select');\n}\n\nasync function onBigPaginationBtnClickrRenderFilms(currentPage) {\n  cardContainerEl.innerHTML = '';\n  apiService.pageNumber = currentPage;\n\n  await onLoad();\n}\n\nasync function onPaginationBtnClick(e) {\n  if (!e.target.classList.contains('pagination__item')) {\n    return;\n  }\n  cardContainerEl.innerHTML = '';\n  apiService.pageNumber = Number(e.target.textContent);\n\n  await onLoad();\n\n  document\n    .querySelector(`.js-page-${currentPage}`)\n    .classList.add('pagination__item--select');\n}\n"],"names":["parcelRequire","$bpxeT","$dfaf77c789ce7a24$var$cardContainerEl","document","querySelector","$dfaf77c789ce7a24$var$paginationEl","$dfaf77c789ce7a24$var$paginationContainerEl","$dfaf77c789ce7a24$var$formRef","$dfaf77c789ce7a24$var$getFilmsFromStoradge","savedFilms","localStorage","getItem","JSON","parse","total_pages","e","console","log","$dfaf77c789ce7a24$var$_paginationFeach","$parcel$interopDefault","$2TvXO","mark","_callee","totalPages","onFormClickSmall","btnLeft","onPaginationClick","onFormClick","removeEventListener","$dfaf77c789ce7a24$var$onPaginationBtnClick","preventDefault","target","classList","contains","currentPage","Number","textContent","$dfaf77c789ce7a24$var$onBigPaginationBtnClickrRenderFilms","$dfaf77c789ce7a24$var$onBigPaginationBtnClickrRenderPagination","$fdkM5","activityArrows","activePage","previousPage","activityOfLeftArrow","activePage1","nextPage","activityOfRightArrow","Math","min","$9JQa4","default","$dfaf77c789ce7a24$var$NUMBER_PAGINATION","displayPaginationSmall","add","clearPagination","addEventListener","innerHTML","displayPaginationBig","disabled","apply","this","arguments","ref","n","ceil","m","displayPaginationBigMiddle","displayPaginationBigFinish","concat","$dfaf77c789ce7a24$var$_onBigPaginationBtnClickrRenderFilms","$dh4R1","pageNumber","$dfaf77c789ce7a24$var$_onPaginationBtnClick"],"version":3,"file":"index.92430c72.js.map"}